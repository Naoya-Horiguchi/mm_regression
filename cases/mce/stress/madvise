. $TRDIR/setup_mce_test.sh

EXPECTED_RETURN_CODE="START EXIT"

TESTFILE="$WDIR/testfile"

HUGETLB=50
HUGETLB_MOUNT=$WDIR/hugetlbfs
HUGETLB_FILE=$HUGETLB_MOUNT/testfile

_control() {
    local i=
    for i in $(seq 10) ; do
		$test_alloc_generic -o multi_backend -d work -e madv_hard | tee -a $OFILE
		$test_alloc_generic -o multi_backend -d work -e madv_soft | tee -a $OFILE
		$test_alloc_generic -o multi_backend -d work -e madv_hard -A | tee -a $OFILE
		$test_alloc_generic -o multi_backend -d work -e madv_soft -A | tee -a $OFILE
    done
    set_return_code EXIT
}

_prepare() {
	prepare_mce_test || return 1
}

_cleanup() {
	cleanup_mce_test
}

_check() {
	check_mce_test
}
